var y=t=>{throw TypeError(t)};var p=(t,r,e)=>r.has(t)||y("Cannot "+e);var a=(t,r,e)=>(p(t,r,"read from private field"),e?e.call(t):r.get(t)),l=(t,r,e)=>r.has(t)?y("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(t):r.set(t,e),f=(t,r,e,h)=>(p(t,r,"write to private field"),h?h.call(t,e):r.set(t,e),e);import"./assets/styles-DBBB_A0t.js";import{a as P,P as M,i as u}from"./assets/vendor-CFO-knsn.js";import{s as S,h as B}from"./assets/render-functions-REWqAvLu.js";var n,c,i;class L{constructor(){l(this,n,"https://api.unsplash.com/search/photos");l(this,c,"gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58");l(this,i,"")}async fetchPopularPhotos(r){try{const{data:e}=await P(a(this,n),{params:{query:"popular",per_page:12,page:r,orientation:"portrait",client_id:a(this,c)}});return e}catch(e){console.log(e)}}async fetchPhotosByQuery(r){try{const{data:e}=await P(a(this,n),{params:{query:a(this,i),per_page:12,page:r,orientation:"portrait",client_id:a(this,c)}});return e}catch(e){console.log(e)}}set query(r){f(this,i,r)}}n=new WeakMap,c=new WeakMap,i=new WeakMap;function g(t){return t.map(({alt_description:r,urls:{small:e},description:h})=>`
          <li class="gallery-item">
            <img src="${e}" alt="${r}" class="gallery-img" />
            <p class="gallery-image-descr">${r}</p>
          </li>
    `).join("")}const d=document.querySelector(".loader"),m=document.querySelector(".gallery"),q=document.querySelector(".js-search-form"),T=document.getElementById("tui-pagination-container"),o=new M(T,{totalItems:0,itemsPerPage:12,visiblePages:5,page:1}),v=o.getCurrentPage();q.addEventListener("submit",b);const s=new L;o.on("afterMove",E);s.fetchPopularPhotos(v).then(t=>{m.innerHTML=g(t.results),o.reset(t.total)});async function b(t){t.preventDefault();const r=t.target.elements.query.value.trim();if(!r){u.warning({message:"Input can not be empty"});return}o.off("afterMove",E),o.off("afterMove",w),s.query=r,S(d);try{const e=await s.fetchPhotosByQuery(v);if(e.results.length===0){u.warning({message:"Images not found. Try another query",position:"center"});return}u.success({message:`There are ${e.total} images`}),o.reset(e.total),m.innerHTML=g(e.results),o.on("afterMove",w)}catch(e){console.log(e),u.error({message:e.message||"Sorry, something wrong"})}finally{B(d),q.reset()}}async function E(t){const r=t.page;try{const e=await s.fetchPopularPhotos(r);m.innerHTML=g(e.results)}catch(e){console.log(e)}}async function w(t){const r=t.page;try{const e=await s.fetchPhotosByQuery(r);m.innerHTML=g(e.results)}catch(e){console.log(e)}}
//# sourceMappingURL=gallery.js.map
